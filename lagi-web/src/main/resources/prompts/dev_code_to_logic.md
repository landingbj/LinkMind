# 代码到业务逻辑描述提示词

## 任务

请分析以下代码并提取详细的业务逻辑描述。

## 你的目标

1. 阅读并理解代码结构
2. 识别主要的业务流程及其目的
3. 用自然语言描述工作流程和数据流
4. 解释关键函数、方法及其作用
5. 描述不同组件之间的交互

## 说明

请提供清晰、详细的业务逻辑文字描述。

**重点关注代码从业务角度做什么，而不是如何实现的。**

## 待分析代码

${{CODE_CONTENT}}

## 输出格式

请按照以下格式提供业务逻辑描述：

### 输出示例

**业务概述**
该系统实现了一个用户订单处理流程，主要负责接收用户订单、验证库存、计算价格并生成订单记录。

**主要业务流程**

1. **订单接收流程**
    - 接收用户提交的订单信息（商品ID、数量、用户ID）
    - 验证订单数据的完整性和有效性
    - 检查用户身份和权限

2. **库存验证流程**
    - 查询商品当前库存数量
    - 判断库存是否满足订单需求
    - 如果库存不足，返回库存不足错误
    - 如果库存充足，预锁定库存

3. **价格计算流程**
    - 获取商品单价
    - 计算订单总价（单价 × 数量）
    - 应用用户折扣或优惠券
    - 计算最终应付金额

4. **订单生成流程**
    - 创建订单记录并保存到数据库
    - 更新库存数量
    - 发送订单确认通知给用户
    - 返回订单ID和订单详情

**核心组件及作用**

- **OrderController**: 接收HTTP请求，负责订单相关的API入口
- **OrderService**: 订单业务逻辑处理核心，协调各个组件完成订单流程
- **InventoryService**: 库存管理服务，负责查询和更新库存
- **PriceCalculator**: 价格计算工具，处理各种定价规则和折扣
- **OrderRepository**: 数据访问层，负责订单数据的持久化

**数据流向**

1. 用户请求 → OrderController → OrderService
2. OrderService → InventoryService（查询库存）
3. OrderService → PriceCalculator（计算价格）
4. OrderService → OrderRepository（保存订单）
5. OrderRepository → 数据库
6. OrderService → 用户（返回订单结果）

**关键业务规则**

- 订单金额必须大于0
- 库存数量必须充足才能下单
- 每个订单必须关联有效的用户ID
- 订单一旦创建不可修改，只能取消

---

请提供业务逻辑描述：

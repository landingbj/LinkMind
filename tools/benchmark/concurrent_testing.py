import json
import time
import random
import uuid
import requests
from concurrent.futures import ThreadPoolExecutor, as_completed
from requests.exceptions import RequestException, HTTPError, ConnectionError, Timeout

# 请求地址
COMPLETIONS_URL = 'http://127.0.0.1:8080/chat/completions'

# 测试问题数组
questions = [
    "光合作用的主要产物是什么？",
    "中国的长城始建于哪个朝代？",
    "计算机的CPU全称是什么？",
    "太阳系中最大的行星是哪颗？",
    "人体最大的器官是什么？",
    "二战结束于哪一年？",
    "Python是一种什么类型的编程语言？",
    "世界上最长的河流是哪条？",
    "DNA的全称是什么？",
    "火山喷发的主要原因是啥？",
    "莎士比亚的四大悲剧有哪些？",
    "元素周期表中的第一个元素是什么？",
    "地球上最高的山峰是哪座？",
    "水的沸点是多少摄氏度？",
    "人类有多少对染色体？",
    "电流的单位是什么？",
    "中国的四大名著分别是什么？",
    "人类的血液循环系统有哪些主要部分？",
    "气象学中的“低气压”通常意味着什么天气？",
    "牛顿提出的三大运动定律有哪些？",
    "地球上最深的海洋是什么？",
    "火车的动力来自哪种能源？",
    "大脑的主要功能是什么？",
    "泰坦尼克号沉没的年份是哪一年？",
    "二氧化碳是什么气体？",
    "太阳的表面温度是多少？",
    "人类可见光的波长范围是多少？",
    "大象是生活在哪些地方的动物？",
    "地球的年龄大约是多少年？",
    "如何定义质能方程？",
    "世界上最高的瀑布是什么？",
    "牛的主要食物是什么？",
    "世界上最大的国家是哪一个？",
    "氧气对人体的作用是什么？",
    "第一台计算机是哪一年发明的？",
    "计算机存储器分为哪几种类型？",
    "热带雨林主要分布在哪些地区？",
    "物质的三态有哪些？",
    "最早的中国文字是什么？",
    "水的化学式是什么？",
    "人类如何呼吸？",
    "电视的发明者是谁？",
    "地球的磁场起源是什么？",
    "日食是如何发生的？",
    "人体的骨骼由多少块骨头组成？",
    "电脑网络的基本组成部分有哪些？",
    "光的传播速度是多少？",
    "阿基米德定律的内容是什么？",
    "种子是如何发芽的？",
    "太阳系的中心是什么？",
    "月球的引力是多少？",
    "人类的基因组有多少个基因？",
    "人类最早的文明在哪里诞生？",
    "火星表面上有哪些特点？",
    "世界上最小的鸟类是哪种？",
    "人类在太空中能够生存多久？",
    "地球的自转速度是多少？",
    "天使与恶魔的故事出自哪部小说？",
    "世界上最深的洞穴在哪里？",
    "塑料是由什么制成的？",
    "什么是化学反应？",
    "什么是食物链？",
    "蝴蝶的生命周期有几个阶段？",
    "一克水的质量是多少？",
    "企鹅是如何适应寒冷气候的？",
    "为什么天空是蓝色的？",
    "地震的震中是哪里？",
    "气候变化会影响哪些方面？",
    "人类如何制造能源？",
    "生物多样性是什么？",
    "哪里有海底热泉？",
    "什么是光年？",
    "反射和折射的区别是什么？",
    "新冠病毒的全称是什么？",
    "谁发明了电话？",
    "现代奥林匹克运动会的发起人是谁？",
    "世界上最古老的建筑是哪一座？",
    "地球的气温是否会变化？",
    "太阳系的年龄是多少年？",
    "为什么叶子在秋天变色？",
    "地球的重力加速度是多少？",
    "人体如何消化食物？",
    "什么是酸碱中和反应？",
    "什么是永动机？",
    "月亮的引力和地球的有什么不同？",
    "蒸汽机的发明人是谁？",
    "时间旅行是可能的吗？",
    "什么是重力波？",
    "光是如何传播的？",
    "什么是生物电现象？",
    "月亮的表面有什么特征？",
    "世界上最古老的书是什么？",
    "谁提出了相对论？",
    "什么是超导现象？",
    "什么是黑洞？",
    "人类如何利用太阳能？",
    "海洋是如何形成的？",
    "太阳风是什么？",
    "电池是如何储存电能的？",
    "原子是由什么组成的？",
    "世界上最大的海洋是什么？",
    "有多少种不同的云？",
    "人类如何制造食物？",
    "什么是微生物？",
    "生物的分类系统如何建立的？",
    "病毒是如何繁殖的？",
    "气候变化对海洋有何影响？",
    "动植物之间是如何互相依存的？",
    "现代科技如何改变我们的生活？",
    "人类历史上最大的战争是什么？",
    "人类如何利用风能？",
    "为什么会有季节变化？",
    "物理学中什么是能量守恒定律？",
    "在太空中是否有声音？",
    "月亮的光是如何形成的？",
    "世界上最早的文字是由谁发明的？",
    "恒星是如何形成的？",
    "人体如何保持平衡？",
    "什么是物质的密度？",
    "地球上的温度在一天中会有变化吗？",
    "什么是天文单位？",
    "海水是如何变成淡水的？",
    "树木是如何进行光合作用的？",
    "什么是自然选择？",
    "人类基因组是如何解码的？",
    "什么是极光？",
    "为什么人类需要水？",
    "什么是基因突变？",
    "什么是核能？",
    "宇航员是如何在太空生活的？",
    "地球的水循环是怎样的？",
    "海平面上升的原因是什么？",
    "什么是行星的公转？",
    "食物链中谁是消费者？",
    "什么时候开始使用电灯？",
    "电磁波的传播速度是多少？",
    "太阳的能量来自哪里？",
    "冰的熔点是多少？",
    "地球的白昼和黑夜是如何变化的？",
    "什么是双螺旋结构？",
    "恒星和行星的区别是什么？",
    "北极星的位置在哪里？",
    "世界上最大的人造物是什么？",
    "人体的免疫系统如何工作？",
    "水的表面张力是什么？",
    "宇宙中是否存在其他生命？",
    "气候变化与人类活动的关系是什么？",
    "水的硬度是如何测量的？",
    "太阳系的行星一共有多少颗？",
    "哪些物质是酸性的？",
    "水能量如何转化为其他能源？",
    "植物是如何吸收二氧化碳的？",
    "火车运行的原理是什么？",
    "电池的种类有哪些？",
    "昆虫的生命周期有几个阶段？",
    "植物生长的条件有哪些？",
    "宇宙中的暗物质是什么？",
    "光速的意义是什么？",
    "大气中的二氧化碳浓度是多少？",
    "世界上最干燥的地方是哪儿？",
    "不同种类的天气现象有哪些？",
    "什么是平衡力？",
    "月亮的引力对地球的影响是什么？",
    "世界上最高的树木是什么？",
    "世界上最古老的动物是什么？",
    "如何利用风力发电？",
    "火星上的天气状况如何？",
    "人类如何进行基因编辑？",
    "太阳活动如何影响地球？",
    "气候变化的应对措施有哪些？"
    "地球的大气层主要由哪些气体组成？",
    "光速是多少？",
    "地球的引力是如何影响物体的运动的？",
    "人类是如何探索火星的？",
    "太阳系中最大的行星是什么？",
    "地球的年龄有多大？",
    "为什么天空是蓝色的？",
    "电磁波的传播速度是多少？",
    "DNA的双螺旋结构是由谁发现的？",
    "量子力学的基本原理是什么？",
    "世界上最高的山峰是哪座？",
    "水循环是如何进行的？",
    "为什么冰浮在水面上？",
    "人类是如何制造人工卫星的？",
    "地球上的所有水资源的比例如何分布？",
    "光合作用对植物生长的作用是什么？",
    "人类如何通过望远镜观察远处的天体？",
    "地球上的气候变化是由什么因素造成的？",
    "恒星的生命周期是怎样的？",
    "月亮对地球的影响有哪些？",
    "为什么海水是咸的？",
    "空气污染的主要来源有哪些？",
    "如何预防地震灾害？",
    "全球变暖的影响有哪些？",
    "黑洞是什么？",
    "星座的形成原因是什么？",
    "为什么会有四季变化？",
    "为什么星星会闪烁？",
    "水的三态是怎样的？",
    "人类如何制造人工心脏？",
    "如何科学地种植植物？",
    "人类的基因是如何遗传的？",
    "现代科技对日常生活有哪些影响？",
    "什么是反物质？",
    "核能是如何产生的？",
    "电池是如何工作的？",
    "什么是相对论？",
    "什么是人工智能？",
    "人类为什么需要氧气？",
    "什么是超导体？",
    "如何减少空气污染？",
    "电流是如何传导的？",
    "什么是光年？",
    "如何防止水资源浪费？",
    "黑洞的引力如何影响光线？",
    "光的速度为什么是最快的？",
    "重力如何作用于地球上的物体？",
    "什么是量子纠缠？",
    "地球为何没有像火星一样有生命灭绝的历史？",
    "气候变化的主要因素有哪些？",
    "海洋对地球气候有什么影响？",
    "太阳如何影响地球的气候？",
    "天文望远镜的工作原理是什么？",
    "人类如何利用太阳能发电？",
    "什么是天文单位？",
    "人类如何利用风能发电？",
    "大气层的不同层次是什么？",
    "海洋是如何形成的？",
    "太阳如何产生能量？",
    "地球的磁场是如何形成的？",
    "电池为什么能够存储能量？",
    "什么是量子计算？",
    "人类为什么需要睡眠？",
    "热力学的三大定律是什么？",
    "宇宙的膨胀是什么意思？",
    "什么是大爆炸理论？",
    "什么是暗物质？",
    "人类如何制造火箭？",
    "人类是如何登陆月球的？",
    "太阳的核心是什么？",
    "地震波的传播方式是什么？",
    "我们如何检测地震的发生？",
    "如何防止森林火灾？",
    "怎样通过物理实验验证牛顿的三大运动定律？",
    "地球的地壳厚度是多少？",
    "为什么雪花的形状是六角形的？",
    "地震的发生是由什么引起的？",
    "海洋如何对气候变化做出反应？",
    "如何用简单的方法说明浮力现象？",
    "月亮的引力对海洋有何影响？",
    "如何测量天体的质量？",
    "为什么鸟类能够飞行？",
    "人类如何探索宇宙中的其他星系？",
    "地球上的矿物资源是如何形成的？",
    "什么是“物质的守恒”定律？",
    "太阳风对地球有何影响？",
    "为什么冰箱能够保持低温？",
    "世界上最深的海沟在哪里？",
    "什么是光的折射现象？",
    "大气层的层次包括哪些？",
    "月亮为什么会有阴晴圆缺？",
    "火星上的气候和地球有何不同？",
    "超导材料的特点是什么？",
    "如何通过太阳能发电？",
    "什么是电动汽车？",
    "日食和月食的形成条件是什么？",
    "现代航天技术的进展如何？",
    "地球的磁极是如何变换的？",
    "电磁波有哪些类型？",
    "我们如何测量地球的周长？",
    "人体的免疫系统是如何工作的？",
    "电磁波的速度是多少？",
    "水循环的过程是什么？",
    "什么是地球的内外核？",
    "什么是电磁感应？",
    "电流是如何产生的？",
    "如何利用风能发电？",
    "什么是空气动力学原理？",
    "海洋的盐度如何影响生物？",
    "如何通过科学实验来探讨物质的性质？",
    "太阳系中的行星有多少颗？",
    "人类如何应对气候变化带来的影响？",
    "什么是声波的传播？",
    "人类的视觉是如何工作的？",
    "什么是地球的温室效应？",
    "如何减少环境污染？",
    "什么是核聚变？",
    "如何保护地球的水资源？",
    "电力是如何产生并输送的？",
    "如何利用风能来提供能源？",
    "月亮为什么对地球有重要的影响？",
    "地球上的生命是如何进化的？",
    "什么是天体的质量和体积的关系？",
    "物质的三种状态是什么？",
    "太阳系中的最小行星是什么？",
    "水如何影响地球的气候？",
    "什么是能量的转化？",
    "如何通过物理实验理解速度和加速度的关系？",
    "为什么天文单位是一个重要的测量单位？",
    "什么是原子核的组成？",
    "地球的气候是如何变化的？",
    "太阳的光如何影响地球上的生命？",
    "海洋对地球上的气候变化有何影响？",
    "如何通过科学实验验证牛顿定律？",
    "什么是时间的相对性？",
    "如何测量物体的密度？",
    "什么是热力学定律？",
    "人体如何消化食物？",
    "水的沸点和冰点是多少？",
    "什么是电场和磁场？",
    "如何测量光的速度？",
    "什么是光的干涉现象？",
    "人类如何利用太阳能发电？",
    "地球的磁场为何对生命至关重要？",
    "如何利用物理原理设计飞行器？",
    "如何通过天文学知识预测天文事件？",
    "如何通过化学反应来生成能量？",
    "什么是水的浮力？",
    "如何设计一颗有效的卫星？",
    "如何进行天文观测？",
    "地球如何生成和维持其磁场？",
    "太阳的活动周期有多长？",
    "什么是引力波？",
    "为什么天空是蓝色的？",
    "光的折射现象是什么？",
    "人体需要哪些基本营养素？",
    "地球的自转和公转是如何影响四季变化的？",
    "水的三态变化是如何进行的？",
    "什么是电流？",
    "电池如何储存能量？",
    "黑洞的引力是如何影响光线的？",
    "如何通过简单的实验验证牛顿的第一定律？",
    "月亮的引力如何影响地球的潮汐？",
    "如何通过实验研究物体的密度？",
    "现代天文学如何研究星系的形成与演变？",
    "地球的气候系统是如何运作的？",
    "太阳系中的行星轨道为何是椭圆形的？",
    "重力是如何影响物体运动的？",
    "火箭如何克服地球引力进入太空？",
    "人类如何研究外星生命的可能性？",
    "海洋如何影响地球的气候变化？",
    "为什么水比油更容易传热？",
    "植物如何进行光合作用？",
    "什么是光的干涉现象？",
    "太阳光是如何形成的？",
    "为什么冰能浮在水面上？",
    "电磁波如何在空间中传播？",
    "如何通过实验验证热力学定律？",
    "空气污染的主要来源有哪些？",
    "如何通过望远镜观测远处的天体？",
    "为什么地球有磁场？",
    "什么是地震波？",
    "人类如何探测到地震的发生？",
    "太阳的活动周期是多长？",
    "人类如何制造人工卫星？",
    "如何利用太阳能发电？",
    "宇宙的膨胀是什么？",
    "什么是量子力学的基本原理？",
    "黑洞的形成是怎样的？",
    "太阳风对地球的影响是什么？",
    "水循环的过程如何进行？",
    "如何测量天体的质量和距离？",
    "恒星如何发光？",
    "地球的气候变化是如何影响生物的？",
    "为什么天空中的云朵是白色的？",
    "太阳如何影响地球的温度变化？",
    "如何通过太阳能热水器加热水？",
    "为什么电池会有使用寿命？",
    "海洋对地球气候的作用有哪些？",
    "如何通过科学实验验证物质的不同状态？",
    "风能如何转化为电能？",
    "重力与质量之间有什么关系？",
    "地球如何生成地震？",
    "水的分子结构是怎样的？",
    "太阳的温度是多少？",
    "什么是空气动力学？",
    "人体如何吸收氧气？",
    "电动汽车是如何工作的？",
    "天文学中的红移现象是什么？",
    "什么是量子计算？",
    "怎样通过光谱分析天体的成分？",
    "水如何影响地球的气候变化？",
    "太阳系中最远的行星是什么？",
    "如何通过望远镜观测星系的演化？",
    "全球变暖的原因是什么？",
    "什么是原子核的组成？",
    "天体的质量和体积如何相关？",
    "什么是绝对零度？",
    "海洋的盐度对海洋生物的影响有哪些？",
    "人体如何进行物质代谢？",
    "什么是电场与磁场的关系？",
    "为什么海水是咸的？",
    "重力如何影响人类的日常生活？",
    "人类如何通过技术探索太空？",
    "火星上的天气条件如何？",
    "如何减少温室气体排放？",
    "什么是星际旅行？",
    "植物的根系是如何吸收水分的？",
    "什么是引力波？",
    "如何测量气压和温度？",
    "电磁感应现象是什么？",
    "黑洞的内部是什么样的？",
    "光的反射现象如何发生？",
    "量子纠缠是什么？",
    "如何通过实验验证光的速度？",
    "海洋如何影响地球的温度变化？",
    "为什么天文学家喜欢使用望远镜？",
    "什么是星座的起源？",
    "如何通过实验理解物体的运动规律？",
    "月球的形成过程是怎样的？",
    "人类是如何制造核能发电站的？",
    "为什么地球上的生物需要氧气？",
    "怎样用实验验证浮力的作用？",
    "什么是风能？",
    "黑洞如何吞噬物质？",
    "水如何影响生态系统的平衡？",
    "人体如何维持体温的恒定？",
    "如何通过实验测量物体的热导率？",
    "什么是宇宙背景辐射？",
    "为什么宇航员在太空中漂浮？",
    "恒星如何形成和演化？",
    "如何利用气候模型预测气候变化？",
    "太阳如何形成太阳风？",
    "什么是天文单位？",
    "地球的天气是如何变化的？",
    "为什么冰和水的密度不同？",
    "如何通过天文观测计算天体的距离？",
    "什么是生物钟？",
    "水蒸气如何影响天气变化？",
    "植物如何适应不同的气候条件？",
    "如何通过分析星体的光谱来判断其年龄？",
    "人类如何利用风能发电？",
    "如何使用电池储存太阳能？",
    "什么是高温超导体？",
    "太阳系中最小的行星是什么？",
    "如何使用太阳能电池板发电？",
    "人体是如何抵抗疾病的？",
    "核能是如何产生电力的？",
    "物理中的惯性定律是什么？",
    "如何通过望远镜观察到星系的存在？",
    "量子物理是如何解释微观世界的？",
    "风能是如何转化为电力的？",
    "月球的引力如何影响地球的运动？",
    "水如何通过蒸发作用影响气候？",
    "地球的热层是如何影响通信的？",
    "植物在生长过程中如何吸收光能？",
    "如何通过太阳能加热空气？",
    "地球的物质循环是如何进行的？",
    "如何通过简易实验研究空气的压力？",
    "什么是核裂变？",
    "空气中水蒸气的作用是什么？",
    "什么是气候模型？",
    "为什么天空中的云朵有时是灰色的？",
    "光的传播速度为什么不变？",
    "如何通过化学反应生成电能？",
    "地球的水资源分布是怎样的？",
    "什么是风速和风力的关系？",
    "如何用望远镜观测太阳系的边缘？",
    "人体如何进行生物化学反应？",
    "什么是物质的比热容？",
    "如何测量星系之间的距离？",
    "太阳的光谱包含哪些信息？",
    "海洋的温度对气候变化的影响如何？",
    "光的强度和距离之间有何关系？",
    "人类如何通过太空探测器探索外星？",
    "如何测量天体的辐射强度？",
    "海水的酸度如何影响海洋生物？",
    "什么是气象学？",
    "如何通过气候数据预测未来气候变化？",
    "太阳如何通过核聚变产生能量？",
    "如何解释光的色散现象？",
    "什么是月食和日食？",
    "大气中二氧化碳的作用是什么？",
    "如何通过分析星系的运动来推测宇宙的结构？",
    "光如何反射和折射？",
    "电流如何通过电线流动？",
    "细胞分裂的过程叫什么？",
    "莫扎特的代表作有哪些？",
    "银河系的直径大约是多少光年？",
    "地球的赤道周长大约是多少公里？",
    "HTML的全称是什么？",
    "恐龙灭绝的主要理论是什么？",
    "联合国成立于哪一年？",
    "维生素C的主要功能是什么？",
    "罗马帝国的首都是哪里？",
    "人工智能的三大核心技术是什么？",
    "地球上最冷的地方是哪里？",
    "蛋白质的基本单位是什么？",
    "蒸汽机的发明者是谁？",
    "世界上最大的岛屿是哪个？",
    "加密货币比特币诞生于哪一年？",
    "人体的主要能量来源是什么？",
    "诺贝尔奖有多少个类别？",
    "地球的自转方向是怎样的？",
    "云计算的核心概念是什么？",
    "人体最坚硬的部位是什么？",
    "文艺复兴时期的代表画家是谁？",
    "地球上最大的哺乳动物是什么？",
    "5G网络的主要优势是什么？",
    "人体内的红细胞功能是什么？",
    "古埃及的象形文字叫什么？",
    "地球的磁场主要由什么产生？",
    "机器学习的主要类型有哪些？",
    "世界上最古老的大学是哪所？",
    "人体内的主要消化器官是什么？",
    "相对论的提出者是谁？",
    "世界上最大的珊瑚礁在哪里？",
    "大数据的“3V”特性是什么？",
    "人体内的主要排毒器官是什么？",
    "古希腊哲学家亚里士多德的学生是谁？",
    "地球的自转轴倾斜角度是多少？",
    "虚拟现实（VR）技术的主要应用领域是什么？",
    "人体内的主要免疫细胞是什么？",
    "工业革命始于哪个国家？",
    "地球上最大的火山是哪个？",
    "深度学习的核心算法是什么？",
    "人体内的主要呼吸器官是什么？",
    "古罗马的斗兽场位于哪里？",
    "地球的板块构造理论是什么？",
    "增强现实（AR）与虚拟现实（VR）的区别是什么？",
    "人体内的主要内分泌腺是什么？",
    "冷战的主要对峙双方是谁？",
    "地球上最大的洋流是什么？",
    "神经网络的基本单位是什么？",
    "人体内的主要感觉器官有哪些？",
    "文艺复兴时期的代表雕塑家是谁？",
    "地球上最干旱的地区是哪里？",
    "物联网的主要技术基础是什么？",
    "人体内的主要循环系统是什么？",
    "古希腊的帕特农神庙供奉哪位神？",
    "地球的自转对气候有何影响？",
    "量子计算的主要优势是什么？",
    "人体内的主要神经系统是什么？",
    "第一次世界大战的导火索是什么？",
    "地球上最大的湖泊是哪个？",
    "强化学习的主要应用场景是什么？",
    "人体内的主要储存能量的物质是什么？",
    "古中国的四大发明是什么？",
    "地球的臭氧层主要作用是什么？",
    "边缘计算的主要特点是什么？",
    "人体内的主要遗传物质是什么？",
    "古印度的佛教圣地菩提伽耶与谁有关？",
    "地球的温室效应主要由哪些气体引起？",
    "自然语言处理的主要任务是什么？",
    "人体内的主要运动骨骼是什么？",
    "古罗马的“十二铜表法”是什么？",
    "地球上最大的地震带是哪个？",
    "生成对抗网络（GAN）的主要用途是什么？",
    "人体内的主要激素是什么？",
    "文艺复兴时期的代表科学家是谁？",
    "地球上最大的热带雨林是哪里？",
    "联邦学习的主要优势是什么？",
    "人体内的主要抗体是什么？",
    "古希腊的奥林匹克运动会始于哪一年？",
    "地球的自转速度在赤道和极点有何不同？",
    "计算机视觉的主要任务是什么？",
    "人体内的主要代谢器官是什么？",
    "古埃及的法老图坦卡蒙属于哪个朝代？",
    "地球上最大的洋是哪个？",
    "推荐系统的核心算法是什么？",
    "人体内的主要电解质是什么？",
    "古中国的科举制度始于哪个朝代？",
    "地球的月球潮汐力对什么有影响？",
    "时间序列分析的主要应用是什么？",
    "人体内的主要脂肪组织是什么？",
    "古罗马的凯撒大帝全名是什么？",
    "地球上最大的陨石坑在哪里？",
    "迁移学习的主要用途是什么？",
    "人体内的主要免疫器官是什么？",
    "古希腊的《荷马史诗》包括哪些作品？",
    "地球的自转对洋流有何影响？",
    "自动驾驶技术的主要挑战是什么？",
    "人体内的主要神经递质是什么？",
    "古中国的《孙子兵法》作者是谁？",
    "地球上最大的高原是哪个？",
    "语音识别技术的主要流程是什么？",
    "人体内的主要水分来源是什么？",
    "古罗马的“ Pax Romana”是什么意思？",
    "地球的极光主要出现在哪里？",
    "知识图谱的主要应用场景是什么？",
    "人体内的主要能量代谢途径是什么？",
    "古希腊的三大哲学家是谁？",
    "地球上最大的峡谷是哪个？",
    "半监督学习的主要优势是什么？",
    "人体内的主要激素分泌器官是什么？",
    "古中国的《道德经》作者是谁？",
    "地球的自转对风向有何影响？",
    "数字孪生技术的主要应用是什么？",
    "人体内的主要淋巴器官是什么？",
    "古罗马的“元老院”主要职能是什么？",
    "地球上最大的冰川系统在哪里？",
    "多模态学习的主要研究方向是什么？",
    "人体内的主要微生物群在哪里？",
    "古中国的《史记》作者是谁？",
    "地球的自转对昼夜变化有何影响？",
    "隐私计算的主要技术有哪些？",
    "地震通常用哪个仪器测量？",
    "脑部的主要功能区有哪些？",
    "硬盘与内存的区别是什么？",
    "19世纪发现的‘魔鬼足迹’现象发生在哪个国家？",
    "地球上最稀有的天然放射性元素是什么？",
    "古巴比伦的‘空中花园’是否真实存在过？",
    "计算机中‘忙等待’的替代方案是什么？",
    "南极洲唯一已知的有袋类动物化石是什么？",
    "人体内的‘岛细胞’主要分泌什么物质？",
    "冷战期间的‘猪湾事件’发生在哪个国家？",
    "编程语言APL以什么独特符号系统著称？",
    "世界上最小的火山位于哪个国家？",
    "生物学中的‘隐性遗传漂变’是什么现象？",
    "中世纪欧洲的‘狼人审判’主要发生在哪个地区？",
    "量子计算中的‘布洛赫球’用来表示什么？",
    "地球上最古老的沙漠化石群位于哪里？",
    "人体内的‘帕钦尼小体’感知什么刺激？",
    "古希腊的‘赫利孔山’与哪位神祇有关？",
    "区块链中的‘拜占庭容错’解决什么问题？",
    "地球上最深的地下湖泊在哪里？",
    "人体内的‘朗格汉斯细胞’主要存在于哪里？",
    "文艺复兴时期的‘卡巴拉’学说源自哪里？",
    "计算机中的‘图灵完备’指的是什么能力？",
    "地球上唯一由陨石撞击形成的岛屿在哪里？",
    "生物学中的‘拟态环’现象如何形成？",
    "古埃及的‘赫里奥波利斯’崇拜哪位神？",
    "密码学中的‘椭圆曲线’有何独特优势？",
    "地球上最古老的活化石鱼类是什么？",
    "人体内的‘库普弗细胞’主要功能是什么？",
    "中世纪的‘圣杯骑士团’传说起源于哪里？",
    "人工智能中的‘反向传播’最早由谁提出？",
    "地球上最小的哺乳动物化石发现于哪里？",
    "生物学中的‘同源异形’现象指的是什么？",
    "古罗马的‘维斯塔贞女’有何特殊职责？",
    "计算机中的‘一致性哈希’用于什么场景？",
    "地球上最古老的珊瑚礁系统在哪里？",
    "人体内的‘梅克尔细胞’与什么功能相关？",
    "文艺复兴时期的‘炼金术符号’有何意义？",
    "量子力学中的‘贝尔不等式’验证了什么？",
    "地球上最深的天然井在哪里？",
    "生物学中的‘趋化因子’如何影响细胞？",
    "古中国的‘九章算术’解决了什么问题？",
    "计算机中的‘内存屏障’有何作用？",
    "地球上最古老的活树种是什么？",
    "人体内的‘星形胶质细胞’主要功能是什么？",
    "中世纪的‘黑死病’最早登陆欧洲的港口是哪里？",
    "区块链中的‘工作量证明’最初由谁提出？",
    "地球上最小的天然温泉在哪里？",
    "生物学中的‘表观遗传标记’如何影响基因？",
    "古希腊的‘德尔斐神谕’由谁主持？",
    "计算机中的‘零知识证明’最早应用于什么？",
    "地球上最古老的火山岩层在哪里？",
    "人体内的‘施万细胞’主要存在于哪里？",
    "文艺复兴时期的‘神秘主义数字’指的是什么？",
    "量子计算中的‘量子纠缠态’有何特性？",
    "地球上最深的地下洞穴系统在哪里？",
    "生物学中的‘基因剪接’最早发现于什么物种？",
    "古罗马的‘阿皮亚大道’通往哪里？",
    "计算机中的‘分布式锁’如何实现？",
    "地球上最古老的化石森林在哪里？",
    "人体内的‘嗜碱性粒细胞’主要功能是什么？",
    "中世纪的‘炼金术士帕拉塞尔苏斯’提出了什么理论？",
    "区块链中的‘智能合约’最早由谁定义？",
    "地球上最小的天然瀑布在哪里？",
    "生物学中的‘线粒体夏娃’理论指的是什么？",
    "古埃及的‘阿蒙神’象征什么？",
    "计算机中的‘协程’与线程的区别是什么？",
    "地球上最古老的陨石碎片发现于哪里？",
    "人体内的‘内皮细胞’在血管中的作用是什么？",
    "文艺复兴时期的‘星盘’主要用于什么？",
    "量子力学中的‘海森堡不确定性原理’如何影响测量？",
    "地球上最深的天然裂缝在哪里？",
    "生物学中的‘异染色质’与基因表达的关系是什么？",
    "古中国的‘黄帝内经’最早记载了什么医学理论？",
    "计算机中的‘缓存一致性协议’解决了什么问题？",
    "地球上最古老的活珊瑚是什么？",
    "人体内的‘巨噬细胞’如何识别病原体？",
    "中世纪的‘圣殿骑士团’解散的原因是什么？",
    "区块链中的‘分片技术’如何提高性能？",
    "地球上最小的天然湖泊在哪里？",
    "生物学中的‘RNA干扰’机制如何工作？",
    "古希腊的‘伊卡洛斯’神话象征什么？",
    "计算机中的‘虚拟内存’最早由谁提出？",
    "地球上最古老的地下水系在哪里？",
    "人体内的‘树突细胞’在免疫中的作用是什么？",
    "文艺复兴时期的‘人文主义’核心思想是什么？",
    "量子计算中的‘量子门’如何操作？",
    "地球上最深的火山口湖在哪里？",
    "生物学中的‘表型可塑性’指的是什么？",
    "古罗马的‘卡拉卡拉浴场’有何独特设计？",
    "计算机中的‘事件驱动模型’适用于什么场景？",
    "地球上最古老的化石细菌发现于哪里？",
    "人体内的‘肥大细胞’与什么反应有关？",
    "中世纪的‘玫瑰战争’发生在哪个国家？",
    "区块链中的‘去中心化自治组织’如何运作？",
    "地球上最小的天然岛屿在哪里？",
    "生物学中的‘基因组印迹’如何影响遗传？",
    "古埃及的‘荷鲁斯之眼’象征什么？",
    "计算机中的‘内存池’技术如何优化性能？",
    "地球上最古老的活化石昆虫是什么？",
    "人体内的‘神经胶质细胞’与神经元的关系是什么？",
    "文艺复兴时期的‘比例尺规’由谁发明？",
    "量子力学中的‘波粒二象性’最早由谁提出？",
    "地球上最深的地下矿井在哪里？",
    "生物学中的‘转录因子’如何调控基因？",
    "古中国的‘墨家’学派主张什么思想？",
    "计算机中的‘垃圾回收’机制最早出现在哪种语言？",
    "地球上最古老的化石足迹发现于哪里？",
    "人体内的‘嗜酸性粒细胞’主要对抗什么？",
    "中世纪的‘十字军东征’首次由谁发起？",
    "区块链中的‘共识算法’有哪些种类？",
    "地球上最小的天然洞穴在哪里？",
    "生物学中的‘染色质重塑’如何影响基因表达？",
    "古希腊的‘俄耳甫斯教’崇拜什么？",
    "计算机中的‘并发控制’解决了什么问题？",
    "地球上最古老的活化石植物是什么？",
    "人体内的‘平滑肌细胞’主要存在于哪里？",
    "文艺复兴时期的‘透视法’由谁系统化？",
    "量子计算中的‘量子退火’适用于什么问题？",
    "地球上最深的天然隧道在哪里？",
    "生物学中的‘基因编辑’技术CRISPR最早发现于什么？",
    "古罗马的‘庞贝古城’被哪座火山摧毁？",
    "计算机中的‘管道模型’如何提高效率？",
    "地球上最古老的化石藻类发现于哪里？",
    "人体内的‘成骨细胞’主要功能是什么？",
    "中世纪的‘炼金术符号’中的‘哲人之石’象征什么？",
    "区块链中的‘侧链’技术有何用途？",
    "地球上最小的天然火山口在哪里？",
    "生物学中的‘端粒酶’与什么过程有关？",
    "古埃及的‘死亡之书’主要记录了什么？",
    "计算机中的‘中断向量表’有何作用？",
    "地球上最古老的活化石爬行动物是什么？",
    "人体内的‘破骨细胞’如何影响骨骼？",
    "文艺复兴时期的‘星图’由谁首次绘制？",
    "量子力学中的‘薛定谔方程’描述了什么？",
    "地球上最深的天然温泉在哪里？",
    "生物学中的‘基因沉默’机制如何实现？",
    "古中国的‘天皇氏’神话与什么有关？",
    "计算机中的‘线程池’如何优化资源？",
    "地球上最古老的化石鸟类发现于哪里？",
    "人体内的‘角质细胞’主要存在于哪里？",
    "中世纪的‘抄本装饰艺术’盛行于哪个地区？",
    "区块链中的‘闪电网络’解决了什么问题？",
    "地球上最小的天然陨石坑在哪里？",
    "生物学中的‘自噬作用’如何维持细胞健康？",
    "古希腊的‘皮提亚’与什么神谕有关？",
    "计算机中的‘影子分页’技术用于什么？"
]

# 设置
RANDOM_TEST = True
MAX_THREADS = 25  # 每批最大并发数
FETCH_TIMES = 5   # 抓取次数
API_KEY = ''
MODEL = None

def process():
    print(f"\n 总问题池大小：{len(questions)}，抓取次数：{FETCH_TIMES}，每次抓取数量：{MAX_THREADS}")
    for i in range(FETCH_TIMES):
        print(f"\n 第 {i + 1} 次抓取测试开始...")
        sample_questions = random.choices(questions, k=MAX_THREADS)
        test(sample_questions)

def test(questions_batch):
    total_count = len(questions_batch)
    total_tokens = 0
    total_duration = 0

    futures = []
    with ThreadPoolExecutor(max_workers=MAX_THREADS) as executor:
        for q in questions_batch:
            prompt = random.choice(questions) if RANDOM_TEST else q
            qid = uuid.uuid4().hex[:6]  # 简短唯一 ID
            print(f"\n======== [QID: {qid}] 请求问题：{prompt}")
            futures.append(executor.submit(completions, COMPLETIONS_URL, API_KEY, MODEL, prompt, qid))

        for future in as_completed(futures):
            try:
                prompt, answer, duration, tokens, qid = future.result()
                total_tokens += tokens
                total_duration += duration
            except Exception as e:
                print(f"[QID: {qid}] 线程执行错误：{repr(e)}")
                import traceback
                print(f"[QID: {qid}] 完整堆栈跟踪：\n{traceback.format_exc()}")

    if total_duration > 0:
        avg_speed = total_tokens / total_duration
        avg_duration = total_duration / total_count
        print(f"\n======== 平均每秒 token 数：{avg_speed:.3f} ========")
        print(f"======== 平均每个请求耗时：{avg_duration:.3f} 秒 ========")

def completions(url, api_key, model, prompt, qid):
    headers = {
        'Content-Type': 'application/json',
        'Authorization': f'Bearer {api_key}'
    }

    data = {
        "category": "lagi",
        "messages": [{"role": "user", "content": prompt}],
        "temperature": 0.8,
        "max_tokens": 1024,
        "stream": False
    }

    if model:
        data["model"] = model

    start_time = time.time()
    completion_tokens = 0
    answer = ''

    try:
        print(f"[QID: {qid}] 请求体: {json.dumps(data, ensure_ascii=False)}")
        response = requests.post(url, data=json.dumps(data), headers=headers, timeout=600)
        print(f"[QID: {qid}] 响应状态码: {response.status_code}")
        print(f"[QID: {qid}] 原始响应全文: {response.text}")

        if response.status_code == 200:
            try:
                result = json.loads(response.text)
                print(f"\n[QID: {qid}] 请求结果：\n{json.dumps(result, indent=2, ensure_ascii=False)}")
                if result.get("usage"):
                    completion_tokens = result["usage"].get("completion_tokens", 0)
                answer = result
            except json.JSONDecodeError as json_err:
                print(f"[QID: {qid}] JSON解析失败: {repr(json_err)}")
                print(f"[QID: {qid}] 完整堆栈跟踪：\n{traceback.format_exc()}")
                raise
        else:
            response.raise_for_status()
    except (HTTPError, ConnectionError, Timeout, RequestException) as e:
        print(f"[QID: {qid}] 请求异常: {repr(e)}")
        import traceback
        print(f"[QID: {qid}] 完整堆栈跟踪：\n{traceback.format_exc()}")
        raise
    except Exception as e:
        print(f"[QID: {qid}] 未知异常: {repr(e)}")
        import traceback
        print(f"[QID: {qid}] 完整堆栈跟踪：\n{traceback.format_exc()}")
        raise

    duration = time.time() - start_time
    print(f"\n[QID: {qid}] 总耗时: {duration:.3f} 秒")
    if completion_tokens > 0:
        print(f"[QID: {qid}] 请求速度: {completion_tokens / duration:.2f} tokens/秒")

    return prompt, answer, duration, completion_tokens, qid

if __name__ == "__main__":
    process()
